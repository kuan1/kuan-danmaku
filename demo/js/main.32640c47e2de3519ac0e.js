!function(t){function e(e){for(var i,o,s=e[0],u=e[1],c=e[2],l=0,p=[];l<s.length;l++)o=s[l],a[o]&&p.push(a[o][0]),a[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);for(h&&h(e);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={main:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var h=u;r.push([7,"vendor"]),n()}({3:function(t,e,n){},7:function(t,e,n){"use strict";n.r(e);n(3);var i=n(0),a=n.n(i),r=n(1),o=n.n(r),s=n(2),u=n.n(s);new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,t),this.options=e,this.el=e.el||document.getElementById("danmaku-container"),this.wrap=this.el.getElementsByClassName("danmaku-wrap")[0],this.dan=e.dan||[],this.speed=e.speed||20,this.danHeight=e.danHeight||40,this.extraWidth=e.extraWidth||20,this.spaceX=e.spaceX||10,this.spaceY=e.spaceY||10,this.init(),window.addEventListener("resize",this.init.bind(this))}return u()(t,[{key:"reload",value:function(t){this.options.api=t,this.dan=[]}},{key:"init",value:function(){if(this.dan.length){var t=this.formatData();this.setHtml(t)}}},{key:"formatData",value:function(){var t=this,e=this.danHeight+this.spaceY,n=Math.floor(this.el.clientHeight/e)||1;this.wrap.style.height="".concat(n*e,"px");var i=a()(Array(n)).map(function(){return 0}),r=this.dan.map(function(n){var r=t.measure(n)+t.extraWidth+t.spaceX,o=Math.min.apply(Math,a()(i)),s=i.findIndex(function(t){return t===o}),u=e*s+t.spaceY/2;return i[s]=o+r,{text:n,width:r,top:u,left:o}}),o=Math.max.apply(Math,a()(i)),s=o/1e3*this.speed;return this.wrap.style.width="".concat(o,"px"),this.wrap.style["animation-duration"]="".concat(s,"s"),this.wrap.style["-webkit-animation-duration"]="".concat(s,"s"),r}},{key:"setHtml",value:function(t){var e=this,n=t.reduce(function(t,n){return"".concat(t,'<div style="height: ').concat(e.danHeight,"px;line-height: ").concat(e.danHeight,"px;left: ").concat(n.left,"px;top: ").concat(n.top,'px" class="danmaku-item">').concat(n.text,"</div>")},"");this.wrap.innerHTML=n}},{key:"measure",value:function(t){if(!this.context){var e=getComputedStyle(this.wrap,null);this.context=document.createElement("canvas").getContext("2d"),this.context.font=e.getPropertyValue("font")}return this.context.measureText(t).width}}]),t}())({dan:function(){for(var t=[],e=0;e<1e3;e++)t.push(Math.floor(1e6*Math.random()));return t}()})}});
//# sourceMappingURL=main.32640c47e2de3519ac0e.js.map